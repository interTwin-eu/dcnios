<!doctype html>
<html lang="en" dir="ltr" class="plugin-pages plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Hello from DCNiOS | DCNiOS</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://intertwin-eu.github.io/dcnios/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://intertwin-eu.github.io/dcnios/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://intertwin-eu.github.io/dcnios/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Hello from DCNiOS | DCNiOS"><meta data-rh="true" name="description" content="Description will go into a meta tag in &lt;head /&gt;"><meta data-rh="true" property="og:description" content="Description will go into a meta tag in &lt;head /&gt;"><link data-rh="true" rel="icon" href="/dcnios/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://intertwin-eu.github.io/dcnios/"><link data-rh="true" rel="alternate" href="https://intertwin-eu.github.io/dcnios/" hreflang="en"><link data-rh="true" rel="alternate" href="https://intertwin-eu.github.io/dcnios/" hreflang="x-default"><script data-rh="true">function insertBanner(){var n=document.createElement("div");n.id="__docusaurus-base-url-issue-banner-container";n.innerHTML='\n<div id="__docusaurus-base-url-issue-banner" style="border: thick solid red; background-color: rgb(255, 230, 179); margin: 20px; padding: 20px; font-size: 20px;">\n   <p style="font-weight: bold; font-size: 30px;">Your Docusaurus site did not load properly.</p>\n   <p>A very common reason is a wrong site <a href="https://docusaurus.io/docs/docusaurus.config.js/#baseUrl" style="font-weight: bold;">baseUrl configuration</a>.</p>\n   <p>Current configured baseUrl = <span style="font-weight: bold; color: red;">/dcnios/</span> </p>\n   <p>We suggest trying baseUrl = <span id="__docusaurus-base-url-issue-banner-suggestion-container" style="font-weight: bold; color: green;"></span></p>\n</div>\n',document.body.prepend(n);var e=document.getElementById("__docusaurus-base-url-issue-banner-suggestion-container"),s=window.location.pathname,o="/"===s.substr(-1)?s:s+"/";e.innerHTML=o}document.addEventListener("DOMContentLoaded",(function(){void 0===window.docusaurus&&insertBanner()}))</script><link rel="stylesheet" href="/dcnios/assets/css/styles.61df0958.css">
<script src="/dcnios/assets/js/runtime~main.79268d02.js" defer="defer"></script>
<script src="/dcnios/assets/js/main.03e8aa5a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/dcnios/"><div class="navbar__logo"><img src="/dcnios/img/logo.svg" alt="DCNiOS Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/dcnios/img/logo.svg" alt="DCNiOS Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">DCNiOS</b></a><a class="navbar__item navbar__link" href="/dcnios/docs/Users">Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/interTwin-eu/dcnios" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><header class="hero hero--primary heroBanner_qdFl"><div class="container"><h1 class="hero__title">DCNiOS</h1><p class="hero__subtitle">DCNiOS is cool</p></div></header><main class="container"><h1 id="dcnios">dCNiOS</h1>
<p><a href="http://dcache.org">dCache</a> is a system for storing and retrieving huge amounts of data, distributed among a large number of heterogeneous server nodes, under a single virtual filesystem tree with a variety of standard access methods.</p>
<p><a href="http://nifi.apache.org">Apache NiFi</a> is a reliable system to process and distribute data through powerful and scalable directed graphs of data routing, transformation, and system mediation logic.</p>
<p><a href="https://oscar.grycap.net">OSCAR</a> is an open-source platform for serverless event-driven data processing of containerized applications across the computing continuum.</p>
<p>Together with <a href="http://github.com/grycap/dcnios">dCNiOS</a> (dCache + NiFi + OSCAR), you can manage the creation of event-driven data processing flows. As shown in the figure, when files are uploaded to dCache, events are ingested in Apache NiFi, which can queue them up depending on the (modifiable at runtime) ingestion rate, to be then delegated for processing into a scalable OSCAR cluster, where a user-defined application based on a Docker image can process the data file.</p>
<div class="text--center"><img src="/dcnios/assets/images/dcnios-workflow-3575fd98ca7fcba90e1aaee5f1d34c1f.png" alt="dcnios-workflow" style="width:500px"></div>
<p>Therefore, dCNiOS has been made to interact with NiFi and deploy a complete dataflow. It uses HTTP calls to communicate with a Nifi cluster, which can be automatically deployed by the <a href="https://im.egi.eu">Infrastructure Manager (IM)</a>. Apache NiFi is deployed on a dynamically provisioned Kubernetes cluster running with a custom Docker image named <code>ghcr.io/grycap/nifi-sse:latest</code>. This new image includes a client for the <a href="https://www.dcache.org/manuals/UserGuide-8.2/frontend.shtml#storage-events">dCache SSE Event Interface</a>, kindly provided by Paul Millar in <a href="https://github.com/paulmillar/dcache-sse">GitHub</a>. It does not require a Nifi registry.</p>
<p>All the dataflow information is described in a YAML file, and by executing the dCNiOS command-line interface, this dataflow is deployed on Nifi.</p>
<p>From predefined recipes (ProcessGroup in Nifi, .json files) created before,</p>
<p>dCNiOS inserts a general flow and changes the variables to create a concrete workflow.</p>
<p>By default, two process group recipes have been created:</p>
<ol>
<li>dcache, which is an active listener for a dCache instance. The <a href="https://en.wikipedia.org/wiki/Server-sent_events">Server-sent Events SSE</a> client actively listens for these events in a user-defined folder in dCache. When a file is uploaded to that folder in dCache, NiFi will introduce the event in the dataflow.</li>
<li>InvokeOSCAR, an HTTP call to invoke an OSCAR service asynchronously. OSCAR supports this events specification to let the user decide whether the file should be pre-staged into the execution sandbox to locally process the data within an OSCAR job or to delegate the processing of the event into an external tool, such as a workflow orchestration platform, thus reducing data movements across the systems.</li>
</ol>
<h2 id="getting-started">Getting Started</h2>
<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li>OSCAR cluster with services deployed</li>
<li>Nifi Cluster deployed</li>
<li>A package provider such as <a href="https://www.anaconda.com/">Anaconda</a></li>
</ul>
<h3 id="installation">Installation</h3>
<p>Create an environment with conda and use it.</p>
<pre><code class="language-bash">conda create --name dcnios python=3.7.6
conda activate dcnios
</code></pre>
<p>Install all the requirements defined in <code>requirements.txt</code></p>
<pre><code class="language-bash">pip install -r requeriments.txt
</code></pre>
<p>Or only install the minimal requirements that dCNiOS needs.</p>
<pre><code class="language-bash">pip install pyyaml==6.0 requests==2.28.2 oscar_python==1.0.3
</code></pre>
<h2 id="authors">Authors</h2>
<ul>
<li>Germán Moltó mailto<!-- -->:gmolto<!-- -->@dsic.upv.es</li>
<li>Estibaliz Parcero mailto<!-- -->:esparig<!-- -->@i3m.upv.es</li>
<li>Sergio Langarita mailto<!-- -->:slangarita<!-- -->@i3m.upv.es</li>
</ul>
<p>Instituto de Instrumentación para Imagen Molecular (I3M), Centro Mixto CSIC — Universitat Politècnica de València, Camino de Vera s/n, 46022 Valencia, España</p>
<h2 id="versions-and-maintenance">Versions and Maintenance</h2>
<p>There is only one version in maintenance:</p>
<ul>
<li>The main branch in the source code repository maintains a working state version of the software component.</li>
<li>Documentation is updated with the new software versions involving any substantial or minimal change in the application&#x27;s behavior. Any issue can be reported in the <a href="https://github.com/interTwin-eu/dcnios/issues">Issues section of the GitHub project</a></li>
<li>Documentation is updated whenever reported as inaccurate or unclear.</li>
</ul>
<h2 id="licensing">Licensing</h2>
<p>dCNiOS is licensed under the Apache License, Version 2.0. See LICENSE for the full license text.</p>
<h2 id="acknowledgements">Acknowledgements</h2>
<p>This work was supported by the project “An interdisciplinary Digital Twin Engine for science’’ (interTwin), which has received funding from the European Union’s Horizon Europe Programme under Grant 101058386.</p>
<div class="text--center"><img src="/dcnios/assets/images/inter-twin-04f64a5ad40967295e5e974bd755b60a.png" alt="dcnios-workflow" style="width:500px"></div>
<h2 id="more-information">More information</h2>
<p>You can find more <a href="https://oscar.grycap.net/blog/data-driven-processing-with-dcache-nifi-oscar/">information</a> in the <a href="https://oscar.grycap.net/blog/">OSCAR&#x27;s blog.</a></p></main></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/dcnios/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/interTwin-eu/dcnios" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
</body>
</html>